---
import profile from "../content/profile.json";
import { Icon } from "astro-icon/components";
import Social from "./Social.astro";
---

<style>
  .msg {
    opacity: 0;
    width: 0;
    overflow: hidden;
    transition:
      opacity 0.8s ease,
      width 0.8s ease;
  }
  .msg.msg-show {
    transition:
      opacity 0.3s ease,
      width 0.3s ease;
    width: 59px;
    opacity: 1;
  }
</style>
<header class="mb-20">
  <div class="inline-block mb-6 float">
    <span
      class="mono bg-gradient-to-r from-purple-500 to-cyan-500 text-black text-xs font-bold px-4 py-2 rounded-md border-2 border-cyan-400 shadow-lg shadow-cyan-500/50"
    >
      &lt;/&gt; DISPONIBLE
    </span>
  </div>
  <h1
    class="glitch text-6xl md:text-8xl font-bold mb-4 bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent"
    data-text={profile.name}
  >
    {profile.name}
  </h1>
  <div class="text-2xl md:text-4xl text-purple-300 mb-8 font-light mono">
    // {profile.title}
  </div>

  <div class="flex flex-wrap gap-4 text-sm text-gray-300 mb-8">
    <div
      class="flex items-center gap-2 bg-slate-900/50 px-4 py-2 rounded-lg border border-purple-500/30 hover:border-purple-500 transition cursor-pointer trans-width"
    >
      <Icon name={"mdi:gmail"} size={20} class="text-cyan-400" />
      <a
        class="hover:text-cyan-400 transition copy-text"
        title="Haz click para copiar"
      >
        {profile.email}
      </a>
      <span class="msg text-purple-400">Â¡Copiado!</span>
    </div>
    <div
      class="flex items-center gap-2 bg-slate-900/50 px-4 py-2 rounded-lg border border-purple-500/30 cursor-default"
    >
      <Icon name={"mdi:google-maps"} size={20} class="text-red-400" />
      {profile.location}
    </div>
  </div>

  <div class="flex flex-wrap gap-4">
    {profile.social.map((social) => <Social social={social} />)}
  </div>
</header>
  <script>
      const copyText = document.querySelectorAll(".copy-text");
      copyText.forEach((text) => {
        text.addEventListener("click", () => {
          navigator.clipboard.writeText(text.textContent);
          const msg = text.parentElement?.querySelector(".msg");
          if(msg?.classList.contains("msg-show")) return
          msg?.classList.add("msg-show");
        
            setTimeout(() => {
              msg?.classList.remove("msg-show");
            }, 2000);
        });
      });
    </script>